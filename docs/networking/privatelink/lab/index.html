
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="unofficial manual and/or commentary on IT technologies.">
      
      
      
        <meta name="author" content="Kwanghoon Jhin">
      
      
        <link rel="canonical" href="https://electronicnomad.net/pf/networking/privatelink/lab/">
      
      <link rel="icon" href="../../../images/favicon-plumping-black.ico">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.1.5">
    
    
      
        <title>실습 - Plumbers' Friday</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.bde7dde4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ef6f36e2.min.css">
        
          
          
          <meta name="theme-color" content="#000000">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans+KR:300,400,400i,700%7CNoto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Noto Sans KR";--md-code-font-family:"Noto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../../css/timeago.css">
    
    
      
        
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-113185952-3","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="black" data-md-color-accent="blue">
  
    
    <script>function __prefix(e){return new URL("../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Plumbers&#39; Friday" class="md-header__button md-logo" aria-label="Plumbers' Friday" data-md-component="logo">
      
  <img src="../../../images/logo-plumping-white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Plumbers' Friday
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              실습
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/electronicnomad/plumbers-friday/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    electronicnomad/plumbers-friday
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Plumbers&#39; Friday" class="md-nav__button md-logo" aria-label="Plumbers' Friday" data-md-component="logo">
      
  <img src="../../../images/logo-plumping-white.png" alt="logo">

    </a>
    Plumbers' Friday
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/electronicnomad/plumbers-friday/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    electronicnomad/plumbers-friday
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        배관공들의 금요일
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        Amazon Forecast
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Amazon Forecast" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Amazon Forecast
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../forecast/" class="md-nav__link">
        Amazon Forecast
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      <label class="md-nav__link" for="__nav_2_2">
        Hands-on Labs
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Hands-on Labs" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          Hands-on Labs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../forecast/handson-labs/preparation/" class="md-nav__link">
        준비
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../forecast/handson-labs/prepare-training-data/" class="md-nav__link">
        훈련 데이터 준비
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../forecast/handson-labs/dataset-groups/" class="md-nav__link">
        데이터-셋 그룹 작성
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../forecast/handson-labs/create-target-time-series-dataset/" class="md-nav__link">
        대상 시계열 데이터-셋 생성
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../forecast/handson-labs/import-target-time-series-data/" class="md-nav__link">
        대상 시계열 데이터 입수
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../forecast/handson-labs/train-a-predictor/" class="md-nav__link">
        예측기 훈련
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../forecast/handson-labs/generate-forecast/" class="md-nav__link">
        예측 생성
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../forecast/handson-labs/forecast-lookup/" class="md-nav__link">
        예측 검색하기
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../forecast/assessment/" class="md-nav__link">
        평가
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../forecast/references/" class="md-nav__link">
        참조
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        Learning Linux
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Learning Linux" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Learning Linux
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux/" class="md-nav__link">
        리눅스를 배워 봅시다
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux/things-you-should-know-first/" class="md-nav__link">
        먼저 알면 좋을 것들
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux/login-and-logout/" class="md-nav__link">
        로그인과 로그아웃
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux/shell/" class="md-nav__link">
        쉘
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux/directories/" class="md-nav__link">
        디렉토리
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux/users-and-groups/" class="md-nav__link">
        사용자와 그룹
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux/file-and-permissions/" class="md-nav__link">
        파일과 권한
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../linux/package-management/" class="md-nav__link">
        패키지 관리
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      <label class="md-nav__link" for="__nav_4">
        AWS Networking
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="AWS Networking" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          AWS Networking
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        시작
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../objectives/" class="md-nav__link">
        목표
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../preparations/" class="md-nav__link">
        준비
      </a>
    </li>
  

          
            
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_4" type="checkbox" id="__nav_4_4" checked>
      
      <label class="md-nav__link" for="__nav_4_4">
        PrivateLink
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="PrivateLink" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_4">
          <span class="md-nav__icon md-icon"></span>
          PrivateLink
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        개요
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          실습
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        실습
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    목표
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vpc-endpoint-services" class="md-nav__link">
    VPC endpoint services 생성
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vpc-endpoint" class="md-nav__link">
    VPC endpoint 생성
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_5" type="checkbox" id="__nav_4_5" >
      
      <label class="md-nav__link" for="__nav_4_5">
        VPC Peering
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="VPC Peering" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_5">
          <span class="md-nav__icon md-icon"></span>
          VPC Peering
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../vpc-peering/" class="md-nav__link">
        개요
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../vpc-peering/lab/" class="md-nav__link">
        실습
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_6" type="checkbox" id="__nav_4_6" >
      
      <label class="md-nav__link" for="__nav_4_6">
        Transit Gateway
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Transit Gateway" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_6">
          <span class="md-nav__icon md-icon"></span>
          Transit Gateway
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../transit-gateway/" class="md-nav__link">
        개요
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../transit-gateway/objectives/" class="md-nav__link">
        목표
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../transit-gateway/lab/" class="md-nav__link">
        실습
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../transit-gateway/testing/" class="md-nav__link">
        시험
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../transit-gateway/network-manager/" class="md-nav__link">
        Network Manager
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../cleanup/" class="md-nav__link">
        정리
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    목표
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vpc-endpoint-services" class="md-nav__link">
    VPC endpoint services 생성
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vpc-endpoint" class="md-nav__link">
    VPC endpoint 생성
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/electronicnomad/plumbers-friday/edit/master/docs/networking/privatelink/lab.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="_1">실습<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<h2 id="_2">목표<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<p>이번 실습에서는 서로 다른 VPC 사이를 연결하는데에 PrivateLink를 사용합니다.
VPC endpoint services를 활용 Network Load Balancer를 앞세운 웹 서비스를
하나의 endpoint로 작성합니다.
그리고, 다른 VPC에서 endpoint를 생성하고, 그 endpoint와 NLB가 엮여 있는 endpoint services를
묶어 PrivateLink를 완성하는 것입니다. 그림으로 다시 한 번 상세히 보면 아래와 같습니다.</p>
<p><img alt="privateLink" src="../../../images/networking/privatelink/connections-and-components.svg" /></p>
<p>우리는 본 실습을 통해 instance 2-1이 VPC 2의 interface endpoint를 이용하여
instance 4-1이 제공하는 서비스에 접속하는 것입니다.</p>
<h2 id="vpc-endpoint-services">VPC endpoint services 생성<a class="headerlink" href="#vpc-endpoint-services" title="Permanent link">&para;</a></h2>
<p>준비 단계에서 생성한 EC2 instance와 Network Load Balancer를 사용합니다.<br />
VPC endpoint services는 PrivateLink와 동의어로 취급해도 무관합니다.</p>
<p><strong>VPC &gt; 가상 프라이빗 클라우드 - 엔드포인스 서비스</strong>를 선택해서 들어갑니다.
그리고 화면 상단의 <code style="background-color:dodgerblue; color:white">엔드포인트 서비스 생성</code>
을 클릭하여 엔드포인트를 생성합니다.</p>
<p>준비 단계에서 미리 만들어 놓은, NLB를 선택합니다.</p>
<p><img alt="create endpoint service" src="../../../images/networking/privatelink/create-endpoint-service.png" /></p>
<p>기본으로 지정되어 있는, '엔드포인트 수락 필수' 항목은 선택하지 않습니다.
우리 시나리오에서는 모든 서비스의 소유권자가 단일 사용자이기 때문에
무용합니다. 만약, 서로 다른 소유권(계정과 이해 관계가 다른 사용자 사이)자들과
이와 같은 일을 계획한다면 상당히 합리적인 선택이 될 수 있습니다.</p>
<p><img alt="create endpoint service" src="../../../images/networking/privatelink/created-endpoint-service.png" /></p>
<h2 id="vpc-endpoint">VPC endpoint 생성<a class="headerlink" href="#vpc-endpoint" title="Permanent link">&para;</a></h2>
<p>먼저, 이전 단계에서 생성해 놓은 VPC endpoint services의 <strong>서비스 이름</strong>을 '클립보드에 복사'해 둡니다.</p>
<p><img alt="copy endpoint service name" src="../../../images/networking/privatelink/copy-endpoint-service-name.png" /></p>
<p><strong>VPC &gt; 가상 프라이핏 클라우드 - 엔드포인트</strong>를 선택합니다.<br />
<code style="background-color:dodgerblue; color:white">엔드포인트 생성</code> 버튼을 눌러 다음의
화면으로 진입합니다.</p>
<p><img alt="copy endpoint" src="../../../images/networking/privatelink/create-endpoint.png" /></p>
<p><strong>서비스 범주</strong>를 <strong>이름별 서비스 찾기</strong>를 선택합니다.<br />
<strong>서비스 이름</strong> 입력란에 클립보드에 복사해 둔 엔드포인트 서비스의 '서비스 이름'을 붙혀 넣습니다.
생성이 완료하면, 아래의 화면처럼 '상태'에 '대기 중'으로 나타납니다. 나머지 세 가지는
Systems Manager의 접속을 위해 만들어 둔 엔드포인트들입니다.</p>
<p><img alt="status standby" src="../../../images/networking/privatelink/endpoint-status-standby.png" /></p>
<p>이제 다시, <strong>VPC &gt; 가상 프라이핏 클라우드 - 엔드포인트 서비스</strong> 메뉴를 클릭하여 화면을 전환합니다.
아래와 같은 화면 출력을 보실 수 있습니다.</p>
<p>엔드포인트 서비스와 연결된 NLB가 보이고, 그 아래, '엔드포인트 연결' 탭을 열어 보면
이전 단계에서 생성한 VPC 2의 엔드포인트가 '대기 중' 상태로 연결을 기다리는 것을 확인할 수 있습니다.</p>
<!--
![service connections](../../images/networking/privatelink/endpoint-service-connections.png) -->

<p>'엔드포인트 연결'이 있는 탭 바로 아래 왼쪽을 살펴보면 '작업'이라는 버튼이 있습니다.
그 버튼을 눌러 '엔드포인트 연결 요청 수락'을 선택합니다. 물론, 지금 마음이 달라져
몇 분 전에 내가 했던 '요청'을 '거부'하는 것도 자유의지이긴 합니다 ;-)</p>
<p><img alt="service connections actions" src="../../../images/networking/privatelink/endpoint-service-connections-actions.png" /></p>
<p>'엔드포인트 연결 요청 수락'을 선택하면, 다시 한 번 사용자의 선택이 바른 것인지 스스로에게
물어볼 시간을 얻습니다. 변심의 여지가 없다면, <code style="background-color:dodgerblue; color:white">에, 수락</code> 버튼을 눌러 의지를 표명하시면 되겠습니다.</p>
<p><img alt="service connections actions accept request" src="../../../images/networking/privatelink/endpoint-service-connections-accept-request.png" /></p>
<p>잠깐의 시간이 흐른 뒤에 아래와 같이 '상태'가 '<strong>사용 가능</strong>'으로 변경되는 것을 확인할 수 있습니다.
사용자도 할 일을 끝내고, 시스템도 할 일을 모두 끝낸 시점입니다.</p>
<p><img alt="service connections available" src="../../../images/networking/privatelink/endpoint-service-connections-available.png" /></p>
<p>여기까지 오셨다면 설정은 모두 끝난 것입니다.<br />
이제 VPC 2에 배포되어 있는 instance 2-1로 접속해서 (session manager를 사용하여)
직전에 생성한 VPC 엔드포인트로 웹 접속을 해 봅니다. VPC 엔드포인트의 주소는 아래의 그림과 같이
해당 엔드포인트의 '세부 정보'의 'DNS 이름'<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup>으로 알 수 있습니다.</p>
<p><img alt="copy endpoint's FQDN" src="../../../images/networking/privatelink/copy-endpoints-fqdn.png" /></p>
<p>VPC 4에 있는 instance 4-1에 접속해서, 간단한 HTML 파일을 만들어 둡니다.
plain text 문서를 index.html로 작성해 두어도 아무런 문제가 되지 않습니다.
Linux/UNIX 커멘드 라인이 익숙하지 않으시다면 vi 편집기가 불편하다고 느껴지신다면
아래의 명령을 복사해서 사용하세요.</p>
<p>Session manager를 사용하여 이제 막 instance 4-1에 접속했다고 가정합니다.</p>
<div class="codehilite"><pre><span></span><code>sudo su - ubuntu
mkdir ./web<span class="p">;</span> <span class="nb">cd</span> ./web
<span class="nb">echo</span> <span class="s1">&#39;hello world, this is instance 4-1&#39;</span> &gt; ./index.html
</code></pre></div>

<p>정상적으로 파일이 만들어 졌는지 확인합니다.</p>
<div class="codehilite"><pre><span></span><code>$ cat ./index.html
hello world
$ 
</code></pre></div>

<p>지금 단계에서 우리가 만든 모든 instance는 외부와 접속이 되지 않습니다. private subnet에
위치해 있고, 다른 연결 방식은 없습니다. 따라서 웹 서버를 설치하기가 용이하지 않습니다.
그래서, 기본으로 설치되어 있는 python의 기능 하나를 활용하기로 합니다.</p>
<p>아래의 내용은, python으로 간단 웹 데몬을 하나 동작시키는 것입니다.
반드시 index.html이 있는 디렉토리에서 명령 내려야 합니다.</p>
<p>아래의 명령 예제는 session manager로 instance 4-1로 이제 접속한 상태를 가정한 것입니다.
위의 작업에 이어서 진행한다면, <code>sudo su - ubuntu</code>와 <code>cd ./web</code>은 명령할 필요는 없습니다.</p>
<div class="codehilite"><pre><span></span><code>$ sudo su - ubuntu
ubuntu@ip-10-40-1-10:~$ <span class="nb">cd</span> ./web
ubuntu@ip-10-40-1-10:~/web$ cat ./index.html
&lt;html&gt;
        &lt;head&gt;&lt;title&gt;Test from Instance <span class="m">4</span>-1&lt;/title&gt;&lt;/head&gt;
        &lt;body&gt;
                Hello World<span class="p">;</span> this is Instance <span class="m">4</span>-1

        &lt;/body&gt;
&lt;/html&gt;
ubuntu@ip-10-40-1-10:~/web$ sudo python3 -m http.server <span class="m">80</span>
Serving HTTP on <span class="m">0</span>.0.0.0 port <span class="m">80</span> <span class="o">(</span>http://0.0.0.0:80/<span class="o">)</span> ...
</code></pre></div>

<p>만약 여러분께서 선택하신 AMI가 Python3를 가지고 있지 않다면,
Python2 정도는 기본으로 설치되어 있기를 바랍니다. Python2의 경우
명령은 다음과 같습니다.</p>
<div class="codehilite"><pre><span></span><code>$ python -m SimpleHTTPServer <span class="m">80</span>
</code></pre></div>

<p>이제 세션 메니저로 VPC 2에 배포해 둔, instance 2-1에 접속합니다.
그리고 VPC 2에 만들어 놓은 (그리고 VPC 4의 NLB를 품고 있는 VPC 엔드포인트 서비스와
연결되어 있는) VPC 엔드포인트의 주소로 <code>curl</code> 명령을 내려 모든 것이 제대로 동작하는지
확인합니다.</p>
<p>문제가 없다면 아래의 예시와 같은 화면 출력을 보실 수 있습니다.</p>
<div class="codehilite"><pre><span></span><code>$ sudo su - ubuntu
To run a <span class="nb">command</span> as administrator <span class="o">(</span>user <span class="s2">&quot;root&quot;</span><span class="o">)</span>, use <span class="s2">&quot;sudo &lt;command&gt;&quot;</span>.
See <span class="s2">&quot;man sudo_root&quot;</span> <span class="k">for</span> details.

ubuntu@ip-10-20-1-10:~$ curl vpce-0b10227a244aa9730-dybhspou.vpce-svc-036f46495a6cabc80.ap-northeast-2.vpce.amazonaws.com
&lt;html&gt;
        &lt;head&gt;&lt;title&gt;Test from Instance <span class="m">4</span>-1&lt;/title&gt;&lt;/head&gt;
        &lt;body&gt;
                Hello World<span class="p">;</span> this is Instance <span class="m">4</span>-1

        &lt;/body&gt;
&lt;/html&gt;
ubuntu@ip-10-20-1-10:~$ 
</code></pre></div>

<p>instance 4-1에 작동시켜 놓은 python 웹 데몬에서 아래와 같이 접속이 이루어졌음을 확인할 수 있습니다.</p>
<div class="codehilite"><pre><span></span><code>$ sudo su - ubuntu
ubuntu@ip-10-40-1-10:~$ <span class="nb">cd</span> web
ubuntu@ip-10-40-1-10:~/web$ cat ./index.html
&lt;html&gt;
        &lt;head&gt;&lt;title&gt;Test from Instance <span class="m">4</span>-1&lt;/title&gt;&lt;/head&gt;
        &lt;body&gt;
                Hello World<span class="p">;</span> this is Instance <span class="m">4</span>-1

        &lt;/body&gt;
&lt;/html&gt;
ubuntu@ip-10-40-1-10:~/web$ sudo python3 -m http.server <span class="m">80</span>
Serving HTTP on <span class="m">0</span>.0.0.0 port <span class="m">80</span> <span class="o">(</span>http://0.0.0.0:80/<span class="o">)</span> ...
<span class="m">10</span>.40.1.80 - - <span class="o">[</span><span class="m">20</span>/Jun/2020 <span class="m">11</span>:31:05<span class="o">]</span> <span class="s2">&quot;GET / HTTP/1.1&quot;</span> <span class="m">200</span> -
<span class="m">10</span>.40.1.80 - - <span class="o">[</span><span class="m">20</span>/Jun/2020 <span class="m">11</span>:31:28<span class="o">]</span> <span class="s2">&quot;GET / HTTP/1.1&quot;</span> <span class="m">200</span> -
<span class="m">10</span>.40.1.80 - - <span class="o">[</span><span class="m">20</span>/Jun/2020 <span class="m">11</span>:31:53<span class="o">]</span> <span class="s2">&quot;GET / HTTP/1.1&quot;</span> <span class="m">200</span> -
</code></pre></div>

<p><img alt="done" src="../../../images/done.svg" /></p>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>'DNS 이름'이라는 명칭은 혼란을
줄 수 도 있습니다, 기술적으로는 FQDN(Full Quantified Domain Name)이 맞지 않나 싶습니다.
엄밀히 말해서 DNS 이름은, Domain Name Server(Service)의 이름으로, DNS-01, NS-WEST-BAY17
뭐 이런 식이어야 할 듯 합니다.&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>
                
                  
                    

<hr>
<div class="md-source-date">
  <small>
    
      Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2020-06-29T03:53:02+09:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2020-06-29</span>
      
    
  </small>
</div>
                  
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="../" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              개요
            </div>
          </div>
        </a>
      
      
        <a href="../../vpc-peering/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              개요
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/electronicnomad" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://www.jhin.com" target="_blank" rel="noopener" title="www.jhin.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M162.4 196c4.8-4.9 6.2-5.1 36.4-5.1 27.2 0 28.1.1 32.1 2.1 5.8 2.9 8.3 7 8.3 13.6 0 5.9-2.4 10-7.6 13.4-2.8 1.8-4.5 1.9-31.1 2.1-16.4.1-29.5-.2-31.5-.8-10.3-2.9-14.1-17.7-6.6-25.3zm61.4 94.5c-53.9 0-55.8.2-60.2 4.1-3.5 3.1-5.7 9.4-5.1 13.9.7 4.7 4.8 10.1 9.2 12 2.2 1 14.1 1.7 56.3 1.2l47.9-.6 9.2-1.5c9-5.1 10.5-17.4 3.1-24.4-5.3-4.7-5-4.7-60.4-4.7zm223.4 130.1c-3.5 28.4-23 50.4-51.1 57.5-7.2 1.8-9.7 1.9-172.9 1.8-157.8 0-165.9-.1-172-1.8-8.4-2.2-15.6-5.5-22.3-10-5.6-3.8-13.9-11.8-17-16.4-3.8-5.6-8.2-15.3-10-22C.1 423 0 420.3 0 256.3 0 93.2 0 89.7 1.8 82.6 8.1 57.9 27.7 39 53 33.4c7.3-1.6 332.1-1.9 340-.3 21.2 4.3 37.9 17.1 47.6 36.4 7.7 15.3 7-1.5 7.3 180.6.2 115.8 0 164.5-.7 170.5zm-85.4-185.2c-1.1-5-4.2-9.6-7.7-11.5-1.1-.6-8-1.3-15.5-1.7-12.4-.6-13.8-.8-17.8-3.1-6.2-3.6-7.9-7.6-8-18.3 0-20.4-8.5-39.4-25.3-56.5-12-12.2-25.3-20.5-40.6-25.1-3.6-1.1-11.8-1.5-39.2-1.8-42.9-.5-52.5.4-67.1 6.2-27 10.7-46.3 33.4-53.4 62.4-1.3 5.4-1.6 14.2-1.9 64.3-.4 62.8 0 72.1 4 84.5 9.7 30.7 37.1 53.4 64.6 58.4 9.2 1.7 122.2 2.1 133.7.5 20.1-2.7 35.9-10.8 50.7-25.9 10.7-10.9 17.4-22.8 21.8-38.5 3.2-10.9 2.9-88.4 1.7-93.9z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../../assets/javascripts/workers/search.d351de03.min.js", "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.a1609d9a.min.js"></script>
      
        <script src="../../../js/timeago.min.js"></script>
      
        <script src="../../../js/timeago_mkdocs_material.js"></script>
      
    
  </body>
</html>